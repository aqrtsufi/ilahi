import{r as p,c as C,d as V,e as u,f as h,g as e,F as k,i as z,t as x,k as s,w as I,o as U,C as D,p as b,l as G,a as he,j as be,s as M,x as ye,m as o,q as xe,L as _e,T as we,y as ae}from"./vue-BEpEtYa0.js";import{u as ie,_ as re,a as Se,r as ke,b as Te}from"./main-NqWZOByy.js";import{g as W,A as Q}from"./playerUtils-DeI4sS7R.js";import{g as Le}from"./pdfBookUtils-BNQ_A2e9.js";import"./pdf-DFMvyHOF.js";import"./fa-D4k8ZL7i.js";function Ce(i=16,t=12){const l=p(i);return{fontSize:l,increaseFont:()=>{l.value+=2},decreaseFont:()=>{l.value=Math.max(t,l.value-2)}}}function Pe(i){const t=p(0),l=p(1),r=p(1),a=C(()=>{const _=i();return Array.isArray(_)?_.map(n=>n.join("<br>")):[]}),d=C(()=>l.value===a.value.length),g=C(()=>a.value.slice(t.value,t.value+l.value));function f(){t.value=Math.max(0,t.value-l.value)}function S(){t.value=Math.min(a.value.length-l.value,t.value+l.value)}function y(){d.value?(l.value=r.value||1,t.value=0):(r.value=l.value,l.value=a.value.length,t.value=0)}function F(){t.value=0,l.value=1,r.value=1}return{currentSlideIndex:t,slideCount:l,previousSlideCount:r,slides:a,slidesToShow:g,showingFull:d,prev:f,next:S,toggleFull:y,reset:F}}const oe={english:{ç:"ch",ş:"sh",ı:"er",ö:"er",ü:"ue",u:"oo","e-":"eh-","a-":"ah-",i:"ee",er:"err"},french:{ç:"tch",ş:"sh",ı:"eu",ö:"euh",u:"ou","e-":"é-",j:"dj"},german:{ç:"tsch",ş:"sch",ı:"ih",ö:"ö",ü:"ü",u:"uh","e-":"eh","a-":"ah","i-":"ie"},spanish:{ç:"ch",ş:"sh",ı:"i",ö:"oe",ü:"ue","e-":"eh","a-":"ah","i-":"í"}};function Y(){return localStorage.getItem("selectedLanguage")}function ze(i){localStorage.setItem("selectedLanguage",i)}function Fe(i,t){const l=t||Y()||"english",r=oe[l]||oe.english;let a=i;for(const[d,g]of Object.entries(r))d.length>1&&(a=a.replace(new RegExp(d,"g"),g));return a.split("").map(d=>/[a-zA-Z]/.test(d)?d:r[d.toLowerCase()]||d).join("")}const $e={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ie={class:"p-6 rounded-lg shadow-xl max-w-sm w-full"},Me={class:"space-y-2"},Be=["onClick","aria-label"],je=V({__name:"LanguageSelection",emits:["close"],setup(i,{emit:t}){const l=t,r=p(!0),a=["English","French","German","Spanish"],d=f=>{ze(f.toLowerCase()),g()},g=()=>{r.value=!1,l("close")};return(f,S)=>r.value?(s(),u("div",$e,[e("div",Ie,[S[0]||(S[0]=e("h2",{class:"text-2xl font-bold mb-4"},"Choose Your Language",-1)),S[1]||(S[1]=e("p",{class:"mb-4"},"Select a language to replace Turkish sounds with familiar equivalents:",-1)),e("div",Me,[(s(),u(k,null,z(a,y=>e("button",{key:y,onClick:F=>d(y),class:"btn btn-primary btn-block","aria-label":`Select ${y} as your language`},x(y),9,Be)),64))]),e("button",{onClick:g,class:"btn btn-ghost mt-4","aria-label":"Close language selection popup"},"Close")])])):h("",!0)}}),Ee={key:0},Ve=["aria-expanded"],Ae={key:1,class:"pronunciation-container",id:"pronunciation-guide",role:"region","aria-label":"Pronunciation guide"},He={key:0,class:"feedback-line mb-4"},qe={class:"text-sm italic"},Ne={class:"original"},De=V({__name:"PronunciationGuide",props:{songId:{}},setup(i){const t=i,l=ie(),r=p(!1),a=p([]),d=p(!1),g=p(!1),f=p(Y()||void 0),S=C(()=>f.value==="german"||f.value==="spanish"||f.value==="french"||f.value==="english"),y=()=>{const T=l.songs.find(w=>w.slug===t.songId);T!=null&&T.pronunciation&&T.pronunciation.length>0&&(d.value=!0,a.value=T.pronunciation.map(w=>w.map(B=>Fe(B,f.value))))};I(f,()=>{y()}),U(()=>{y()});const F=()=>{f.value?n():g.value=!0},_=()=>{g.value=!0},n=async()=>{r.value=!r.value},R=()=>{g.value=!1,f.value=Y()||void 0,n()};return(T,w)=>{const B=G("font-awesome-icon");return d.value?(s(),u("div",Ee,[e("button",{onClick:F,class:"btn btn-primary mb-4","aria-expanded":r.value,"aria-controls":"pronunciation-guide"},x(r.value?"Hide":"Show")+" Pronunciation Guide ",9,Ve),e("button",{onClick:_,class:"btn btn-ghost","aria-label":"Change language settings"},[b(B,{icon:["fas","language"],class:"text-lg"})]),g.value?(s(),D(je,{key:0,onClose:R})):h("",!0),r.value&&a.value?(s(),u("div",Ae,[w[0]||(w[0]=e("div",{class:"feedback-line mb-4"},[e("p",{class:"text-sm italic"}," Second phase testing for pronunciation. Now you have the turkish sounds replaced in the langauge that you can relate to: English, French, German, Spanish. Note that this is only for basic ilahis for now. ")],-1)),S.value?(s(),u("div",He,[e("p",qe," Please give feedback on how we can improve the pronunciation, especially if you speak "+x(f.value)+". Thank you! ",1)])):h("",!0),(s(!0),u(k,null,z(a.value,(j,L)=>(s(),u("div",{key:L,class:"stanza-guide"},[(s(!0),u(k,null,z(j,(A,H)=>(s(),u("div",{key:H,class:"line-guide"},[e("p",Ne,x(A),1)]))),128))]))),128))])):h("",!0)])):h("",!0)}}}),Ge=re(De,[["__scopeId","data-v-42ee7eb9"]]),Re=he("settings",()=>{const i=localStorage.getItem("showTranslation"),t=localStorage.getItem("translationLayout"),l=p(i?i==="true":!1),r=p(t??"below");I(l,g=>{localStorage.setItem("showTranslation",String(g))},{immediate:!0}),I(r,g=>{localStorage.setItem("translationLayout",g)},{immediate:!0});function a(){l.value=!l.value}function d(){r.value=r.value==="below"?"side":"below"}return{showTranslation:l,translationLayout:r,toggleTranslationVisibility:a,toggleTranslationLayout:d}}),Ze={class:"flex flex-wrap gap-2"},Oe=["aria-pressed"],We=V({__name:"TranslationControls",props:{hasTranslation:{type:Boolean},showTranslation:{type:Boolean},layout:{}},emits:["toggle-translation","toggle-layout"],setup(i){return(t,l)=>{const r=G("font-awesome-icon");return s(),u("div",Ze,[t.hasTranslation?(s(),u("button",{key:0,class:"btn btn-primary btn-sm gap-2","data-no-float-nav":"",onClick:l[0]||(l[0]=be(a=>t.$emit("toggle-translation"),["stop"])),"aria-pressed":t.showTranslation},[b(r,{icon:["fas","language"]}),M(" "+x(t.showTranslation?"Hide":"Show")+" Translation ",1)],8,Oe)):h("",!0),t.hasTranslation&&t.showTranslation?(s(),u("button",{key:1,class:"btn btn-outline btn-sm gap-2",onClick:l[1]||(l[1]=a=>t.$emit("toggle-layout"))},[b(r,{icon:["fas",t.layout==="below"?"columns":"bars"]},null,8,["icon"]),M(" "+x(t.layout==="below"?"Side-by-side":"Below lyrics"),1)])):h("",!0)])}}});function le(i){return`${window.location.origin}/ilahi/player/${i}`}const Qe={class:"flex flex-wrap gap-2"},Ue=V({__name:"ShareControls",props:{songSlug:{},songTitle:{}},setup(i){const t=i;async function l(){const a=le(t.songSlug);try{navigator.share?await navigator.share({title:t.songTitle,url:a}):(await navigator.clipboard.writeText(a),alert("Link copied to clipboard"))}catch{}}async function r(){const a=le(t.songSlug);await navigator.clipboard.writeText(a),alert("Link copied to clipboard")}return(a,d)=>{const g=G("font-awesome-icon");return s(),u("div",Qe,[e("button",{class:"btn btn-ghost btn-sm gap-2",onClick:l},[b(g,{icon:["fas","share-alt"]}),d[0]||(d[0]=M(" Share "))]),e("button",{class:"btn btn-ghost btn-sm gap-2",onClick:r},[b(g,{icon:["fas","copy"]}),d[1]||(d[1]=M(" Copy Link "))])])}}});function Ye(i){return!!(i.mainLinks&&i.mainLinks.length>0||i.alternateTunes&&i.alternateTunes.length>0)}function Je(){const i=p(parseInt(localStorage.getItem("fontSize")||"16"));return{fontSize:i,updateFontSize:a=>{const d=parseInt(a.target.value);i.value=d,localStorage.setItem("fontSize",d.toString())},increaseFontSize:()=>{i.value<132&&(i.value+=2,localStorage.setItem("fontSize",i.value.toString()))},decreaseFontSize:()=>{i.value>12&&(i.value-=2,localStorage.setItem("fontSize",i.value.toString()))}}}function Ke(i){const t=p(1);return{slideCount:t,increaseStanzaCount:()=>{t.value<i.value.length&&t.value++},decreaseStanzaCount:()=>{t.value>1&&t.value--}}}const Xe={key:0,class:"space-y-2"},et={class:"w-full max-w-4xl mx-auto p-2 flex flex-col items-center bg-base-100 text-base-content"},tt={class:"w-full flex flex-wrap gap-1 mb-2"},nt={class:"w-full flex flex-wrap items-center gap-4 mb-4"},st={class:"flex items-center gap-2"},at=["value"],ot={key:0,class:"w-full"},lt={class:"text-3xl font-bold mb-4 text-center"},it={key:0,class:"flex flex-wrap gap-2 mb-4 justify-center"},rt={key:1,class:"mb-4"},ut={key:2,class:"fixed inset-0 z-50 bg-base-100 text-base-content flex flex-col items-center justify-center"},ct={class:"fixed top-4 right-4 z-50"},dt={class:"flex flex-col items-center w-full max-w-2xl mx-auto"},gt={class:"flex justify-between items-center w-full mb-4"},vt={class:"text-3xl font-bold text-center flex-1"},pt={class:"flex flex-col sm:flex-row justify-between items-center w-full mb-4 gap-4"},ft={class:"flex items-center gap-0"},mt=["disabled"],ht={class:"text-xl font-bold w-10 text-center select-none"},bt=["disabled"],yt=["disabled"],xt={class:"text-xl font-bold w-10 text-center select-none"},_t=["disabled"],wt=["innerHTML"],St={key:0,class:"my-2 border-t border-base-300"},kt={class:"flex justify-center gap-4 mt-4"},Tt=["disabled"],Lt=["disabled"],Ct=["innerHTML"],Pt={key:4,class:"mt-4"},zt={key:5,class:"mt-4"},Ft={key:1,class:"text-center text-xl text-base-content","aria-live":"polite"},$t={key:2,class:"text-center text-xl text-base-content","aria-live":"polite"},It={key:3,class:"mt-4 p-4 bg-error text-error-content rounded-lg",role:"alert","aria-live":"assertive"},Mt={class:"w-full flex flex-wrap items-center gap-4 mb-4"},Bt=V({__name:"SongDisplay",setup(i){const t=p(null),l=p(null),r=ye(),a=ie(),d=Se(),g=Re(),f=p(""),S=p(null),y=p(!0),F=C(()=>n.value?Ye(n.value):!1),_=p(!0);p(!1);const n=C(()=>{const m=r.params.slug;return a.songs.find(c=>c.slug===m)});Ce();const R=C(()=>n.value?ke(n.value,{fontSize:L.value,showTranslation:g.showTranslation,translationLayout:g.translationLayout,theme:d.theme==="light"?"light":"dark"}):""),T=async()=>{if(n.value)try{await Le(n.value),f.value=""}catch(m){f.value=m.message||"Failed to generate PDF. Please try again later."}else f.value="Song data is not available. Please try reloading the page."},w=C(()=>{const m=r.query.file;return typeof m=="string"&&m.trim()?m:"ilahi.txt"}),B=()=>{_.value=!_.value},j=m=>{t.value=m.player,l.value=m.type};I([()=>r.params.slug,()=>r.query.file],async()=>{y.value=!0;try{(a.songs.length===0||a.currentPath!==w.value)&&await a.fetchSongs(!1,w.value),!n.value&&w.value!=="naat.txt"&&await a.fetchSongs(!0,"naat.txt")}finally{y.value=!1}}),U(async()=>{y.value=!0;try{(a.songs.length===0||a.currentPath!==w.value)&&(await a.fetchSongs(!0,w.value),console.log("Available slugs:",a.songs.map(m=>m.slug)))}catch(m){console.error("Error loading song:",m),f.value="Failed to load song. Please try again later."}finally{y.value=!1}});const{fontSize:L,updateFontSize:A,increaseFontSize:H,decreaseFontSize:J}=Je(),K=()=>{r.hash==="#history"&&ae(()=>{const m=document.getElementById("history");m&&m.scrollIntoView({behavior:"smooth"})})},ue=()=>{ae(()=>{const m=document.getElementById("pronunciation");m&&m.scrollIntoView({behavior:"smooth"})})};U(K),I(()=>r.hash,K);const $=p(!1),{currentSlideIndex:q,slides:Z,slidesToShow:X,showingFull:O,prev:ce,next:de,toggleFull:ge,reset:ve}=Pe(()=>n.value?n.value.lyrics:[]);function pe(){ce()}function fe(){de()}function me(){ge()}I([$,n],()=>{ve()});const{slideCount:E,increaseStanzaCount:ee,decreaseStanzaCount:te}=Ke(Z);return(m,c)=>{var ne,se;const P=G("font-awesome-icon");return s(),u(k,null,[y.value?(s(),u("div",Xe,c[7]||(c[7]=[e("div",{class:"skeleton h-6 w-1/2"},null,-1),e("div",{class:"skeleton h-6 w-2/3"},null,-1),e("div",{class:"skeleton h-6 w-1/3"},null,-1)]))):h("",!0),e("div",et,[e("div",tt,[n.value?(s(),D(Ge,{key:0,"song-id":n.value.slug,lyrics:n.value.lyrics,onShown:ue},null,8,["song-id","lyrics"])):h("",!0),e("button",{onClick:c[0]||(c[0]=v=>$.value=!$.value),class:"btn btn-primary btn-sm"},x($.value?"show full ilahi":"Slide Mode"),1),F.value?(s(),u("button",{key:1,class:"btn btn-primary btn-sm",onClick:B},[b(P,{icon:["fas",_.value?"music":"pause"],class:"mr-2"},null,8,["icon"]),M(" "+x(_.value?"Show":"Hide")+" Music ",1)])):h("",!0)]),e("div",nt,[n.value?(s(),D(We,{key:0,"has-translation":!!((ne=n.value)!=null&&ne.translation&&n.value.translation.length>0),"show-translation":o(g).showTranslation,layout:o(g).translationLayout,onToggleTranslation:o(g).toggleTranslationVisibility,onToggleLayout:o(g).toggleTranslationLayout},null,8,["has-translation","show-translation","layout","onToggleTranslation","onToggleLayout"])):h("",!0),e("div",st,[c[8]||(c[8]=e("span",{class:"text-sm"},"Smaller",-1)),e("input",{type:"range",min:"12",max:"132",value:o(L),class:"range range-xs range-primary custom-range",onInput:c[1]||(c[1]=(...v)=>o(A)&&o(A)(...v))},null,40,at),c[9]||(c[9]=e("span",{class:"normal-case"},"Larger",-1))]),n.value?(s(),D(Ue,{key:1,"song-slug":n.value.slug,"song-title":n.value.title},null,8,["song-slug","song-title"])):h("",!0)]),n.value?(s(),u("div",ot,[e("h1",lt,x(n.value.title),1),n.value.suggestedZikrs&&n.value.suggestedZikrs.length?(s(),u("div",it,[c[10]||(c[10]=e("span",{class:"text-sm text-gray-500 mr-2 font-medium"},"Suggested zikr:",-1)),(s(!0),u(k,null,z(n.value.suggestedZikrs,v=>(s(),u("span",{key:v,class:"px-2 py-0.5 rounded-full bg-green-100 text-green-800 text-xs font-semibold border border-green-200"},x(v),1))),128))])):h("",!0),!_.value&&n.value.mainLinks&&n.value.mainLinks.length>0?(s(),u("div",rt,[b(Q,{"audio-src":n.value.mainLinks[0],"player-type":o(W)(n.value.mainLinks[0]),onPlayerReady:j},null,8,["audio-src","player-type"])])):h("",!0),$.value?(s(),u("div",ut,[e("div",ct,[b(Te)]),e("div",dt,[e("div",gt,[e("button",{onClick:c[2]||(c[2]=v=>$.value=!1),class:"btn btn-circle btn-ghost","aria-label":"Back"},[b(P,{icon:["fas","arrow-left"]})]),e("h1",vt,x((se=n.value)==null?void 0:se.title),1),c[11]||(c[11]=e("div",{style:{width:"40px"}},null,-1))]),e("div",pt,[e("div",ft,[e("button",{onClick:c[3]||(c[3]=(...v)=>o(te)&&o(te)(...v)),disabled:o(E)<=1,class:"btn btn-circle btn-primary text-lg"},[b(P,{icon:["fas","minus"]})],8,mt),e("span",ht,x(o(E)),1),e("button",{onClick:c[4]||(c[4]=(...v)=>o(ee)&&o(ee)(...v)),disabled:o(E)>=o(Z).length,class:"btn btn-circle btn-primary text-lg"},[b(P,{icon:["fas","plus"]})],8,bt),c[12]||(c[12]=e("span",{class:"mx-4"},null,-1)),e("button",{onClick:c[5]||(c[5]=(...v)=>o(J)&&o(J)(...v)),disabled:o(L)<=12,class:"btn btn-circle btn-secondary text-lg"},[b(P,{icon:["fas","minus"]})],8,yt),e("span",xt,x(o(L)),1),e("button",{onClick:c[6]||(c[6]=(...v)=>o(H)&&o(H)(...v)),disabled:o(L)>=132,class:"btn btn-circle btn-secondary text-lg"},[b(P,{icon:["fas","plus"]})],8,_t)]),e("button",{onClick:me,class:"btn btn-accent btn-sm text-lg"},x(o(O)?"By stanza":"Full ilahi"),1)]),b(we,{name:"slide",mode:"out-in"},{default:xe(()=>[(s(),u("div",{key:o(q)+"-"+o(E),class:"w-full p-4 overflow-y-auto",style:_e({fontSize:o(L)+"px",maxHeight:"70vh"})},[(s(!0),u(k,null,z(o(X),(v,N)=>(s(),u(k,{key:o(q)+N},[e("div",{innerHTML:v},null,8,wt),N<o(X).length-1?(s(),u("hr",St)):h("",!0)],64))),128))],4))]),_:1}),e("div",kt,[e("button",{onClick:pe,disabled:o(q)===0||o(O),class:"btn btn-secondary"}," Previous ",8,Tt),e("button",{onClick:fe,disabled:o(q)+o(E)>=o(Z).length||o(O),class:"btn btn-secondary"}," Next ",8,Lt)])])])):(s(),u("div",{key:3,class:"mb-6",innerHTML:R.value},null,8,Ct)),!_.value&&n.value.mainLinks&&n.value.mainLinks.length>1?(s(),u("div",Pt,[c[13]||(c[13]=e("h2",{class:"text-2xl font-semibold mb-2"},"More Versions",-1)),(s(!0),u(k,null,z(n.value.mainLinks.slice(1),(v,N)=>(s(),u("div",{key:N,class:"mb-2"},[b(Q,{"audio-src":v,"player-type":o(W)(v),onPlayerReady:j},null,8,["audio-src","player-type"])]))),128))])):h("",!0),!_.value&&n.value.alternateTunes&&n.value.alternateTunes.length>0?(s(),u("div",zt,[c[14]||(c[14]=e("h2",{class:"text-2xl font-semibold mb-2"},"Alternate Tunes",-1)),(s(!0),u(k,null,z(n.value.alternateTunes,v=>(s(),u("div",{key:v,class:"mb-2"},[b(Q,{"audio-src":v,"player-type":o(W)(v),onPlayerReady:j},null,8,["audio-src","player-type"])]))),128))])):h("",!0)])):y.value?(s(),u("div",$t,"Loading ilahi...")):(s(),u("div",Ft,"ilahi not found")),f.value||S.value?(s(),u("div",It,x(f.value||S.value),1)):h("",!0),e("div",Mt,[e("button",{class:"btn btn-accent",onClick:T},[b(P,{icon:["fas","file-pdf"],class:"mr-2",size:"2xl"})])]),c[15]||(c[15]=e("div",{class:"mt-6 text-center text-sm text-base-content"},[M(" This app is maintained by the AQRT. "),e("a",{href:"https://aqrtsufi.org",target:"_blank",rel:"noopener noreferrer",class:"link link-primary focus:ring-2 focus:ring-offset-2 focus:ring-primary"},"Visit aqrtsufi.org")],-1))])],64)}}}),Nt=re(Bt,[["__scopeId","data-v-3742076a"]]);export{Nt as default};
