import{d as V,r as y,o as g,e as a,g as s,m,p as c,l as A,s as w,t as _,F as h,i as v,q as x,A as D,D as B,f as b,C as T,V as M,T as N,y as z,k as t}from"./vue-BEpEtYa0.js";import{a as F,u as H,j as $}from"./main-NqWZOByy.js";import{A as j,g as q}from"./playerUtils-DeI4sS7R.js";import"./pdf-DFMvyHOF.js";import"./fa-D4k8ZL7i.js";const E={class:"w-full max-w-4xl mx-auto p-4"},R={class:"text-center mb-8"},Z={key:0,class:"alert alert-info shadow-lg mt-4"},G={key:1,class:"alert alert-info shadow-lg mt-4"},Q={key:0,class:"min-h-[200px] flex items-center justify-center"},J={key:1,class:"alert alert-error shadow-lg"},K={key:2,class:"space-y-6"},O=["data-zikr-index"],U={class:"card-body"},W=["onClick"],X={class:"mt-6 space-y-6"},Y={key:0},ee={key:1,class:"card-body prose max-w-none"},te=["innerHTML"],ie=V({__name:"ZikrPlayer",setup(ae){F();const n=H(),d=y(!0),k=y(""),r=y(-1),p=y(!1),S=async o=>{if(!p.value){p.value=!0;try{if(r.value===o)r.value=-1;else{r.value!==-1&&(r.value=-1,await z()),r.value=o,await z();const e=document.querySelector(`[data-zikr-index="${o}"]`);e==null||e.scrollIntoView({behavior:"smooth",block:"start"})}}catch(e){console.error("Error toggling player:",e)}finally{setTimeout(()=>{p.value=!1},100)}}};g(async()=>{window.scrollTo(0,0)});const C=o=>{};return g(async()=>{var o;try{d.value=!0,n.zikrItems.length===0&&await n.fetchSongs(!0)}catch{(o=window.showGlobalToast)==null||o.call(window,"Failed to load. Tap to try again.",()=>{n.fetchSongs(!0)})}finally{d.value=!1}}),(o,e)=>{const u=A("font-awesome-icon");return t(),a("div",E,[s("div",R,[e[3]||(e[3]=s("h1",{class:"text-4xl font-bold mb-2"},"AQRT Zikr Practice",-1)),e[4]||(e[4]=s("p",{class:"text-base-content/70"},"Do zikr by following along with Shaykh Taner and Shaykha Muzeyyen Ansari!",-1)),m(n).zikrItems.length===0&&!d.value?(t(),a("div",Z,[c(u,{icon:"info-circle",class:"h-6 w-6"}),s("span",null,[e[0]||(e[0]=w("Tap on the refresh button ")),c(u,{icon:"rotate",class:"text-primary mx-1"}),e[1]||(e[1]=w(" above to load the zikr recordings."))])])):(t(),a("div",G,[e[2]||(e[2]=s("span",null,"Tap on the zikr below that you wish to listen and recite at the same time.",-1)),c(u,{icon:"hand-point-down",class:"h-6 w-6"})]))]),d.value?(t(),a("div",Q,e[5]||(e[5]=[s("div",{class:"loading loading-spinner loading-lg text-primary"},null,-1)]))):k.value?(t(),a("div",J,[c(u,{icon:"triangle-exclamation",class:"h-6 w-6"}),s("span",null,_(k.value),1)])):(t(),a("div",K,[(t(!0),a(h,null,v(m(n).zikrItems,(i,l)=>(t(),a("div",{key:l,"data-zikr-index":l,class:"card zikr-fullwidth-card bg-base-100 text-base-content shadow-xl hover:shadow-2xl transition-all cursor-pointer hover:-translate-y-1"},[s("div",U,[s("h2",{class:"card-title text-2xl",onClick:f=>S(l)},_(i.zikrTitle),9,W),c(N,{name:"fade"},{default:x(()=>[D(s("div",X,[r.value===l?(t(),a("div",Y,[(t(),T(M,null,{default:x(()=>[(t(),T(j,{key:`player-${l}`,"audio-src":i.zikrLink,"player-type":m(q)(i.zikrLink),onPlayerReady:C},null,8,["audio-src","player-type"]))]),_:2},1024))])):b("",!0),i.zikrLyrics?(t(),a("div",ee,[(t(!0),a(h,null,v(i.zikrLyrics,(f,L)=>(t(),a("div",{key:L,class:"mb-6 last:mb-0"},[(t(!0),a(h,null,v(f,(P,I)=>(t(),a("div",{key:I,class:"text-lg leading-relaxed",innerHTML:m($)(P)},null,8,te))),128))]))),128))])):b("",!0)],512),[[B,r.value===l]])]),_:2},1024)])],8,O))),128))]))])}}});export{ie as default};
